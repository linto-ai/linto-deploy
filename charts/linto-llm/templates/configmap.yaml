{{- if .Values.llmGatewayApi.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "linto-llm.fullname" . }}-llm-api-config
  labels:
    {{- include "linto-llm.labels" . | nindent 4 }}
    app.kubernetes.io/component: llm-api
data:
  # Database connection (password injected via env var)
  POSTGRES_HOST: {{ include "linto-llm.postgresHost" . | quote }}
  POSTGRES_PORT: "5432"
  POSTGRES_DB: "llm_DB"
  POSTGRES_USER: "llm_user"
  # Note: DATABASE_URL is set in deployment.yaml with proper asyncpg driver
  # Redis connection (password injected via env var)
  REDIS_HOST: {{ include "linto-llm.redisHost" . | quote }}
  REDIS_PORT: "6379"
  # Celery broker URL
  CELERY_BROKER_URL: {{ include "linto-llm.celeryBrokerUrl" . | quote }}
  CELERY_RESULT_BACKEND: {{ include "linto-llm.celeryBrokerUrl" . | quote }}
  # API settings
  HTTP_PORT: "80"
  PYTHONUNBUFFERED: "1"
  DEBUG: {{ .Values.llmGatewayApi.env.DEBUG | default "false" | quote }}
  CORS_ORIGINS: {{ .Values.llmGatewayApi.env.CORS_ORIGINS | default (printf "https://%s" .Values.global.domain) | quote }}
{{- end }}
# Note: Frontend ConfigMap removed - basePath is now baked into the Docker image at build time (/llm-admin)
# and API/WS URLs are auto-detected from window.location at runtime
