# Default values for linto-studio
# This is a YAML-formatted file.

global:
  domain: localhost
  imageTag: latest-unstable
  tls:
    enabled: true
    mode: mkcert  # mkcert, acme, custom, off
    acmeEmail: ""
    secretName: linto-tls  # Shared TLS secret across all charts
    createCertificate: true  # Only one chart should create the certificate
  storage:
    # Database storage - for MongoDB, PostgreSQL, Redis (should be local, NOT on NFS)
    database:
      # Use hostPath for direct volume mount (like Docker volumes)
      # If set, PVCs are not used for databases
      hostPath: ""  # e.g., /home/user/linto/databases
      # Node selector for database pods when using hostPath (ensures pods run on correct node)
      nodeSelector: {}  # e.g., kubernetes.io/hostname: linto-gpu-01
    # File storage - for models, uploads, media files (can be NFS)
    files:
      hostPath: ""  # e.g., /data/linto
  storageClass: ""

# Studio API
studioApi:
  enabled: true
  replicas: 6
  image:
    repository: lintoai/studio-api
    pullPolicy: IfNotPresent
  resources:
    limits:
      cpu: "2"
      memory: 2Gi
    requests:
      cpu: 10m
      memory: 64Mi
  env:
    DB_HOST: "{{ .Release.Name }}-mongodb"
    DB_PORT: "27017"
    DB_NAME: conversations
    WEBSERVER_HTTP_PORT: "80"
    NODE_ENV: production
    # Secrets - should be overridden
    CM_JWT_SECRET: ""
    CM_REFRESH_SECRET: ""
    SUPER_ADMIN_EMAIL: admin@linto.local
    SUPER_ADMIN_PWD: ""
    # SMTP defaults (empty = disabled)
    SMTP_HOST: ""
    SMTP_PORT: "465"
    SMTP_SECURE: "true"
    SMTP_REQUIRE_TLS: "true"
    SMTP_AUTH: ""
    NO_REPLY_EMAIL: ""
    # OIDC defaults
    OIDC_GOOGLE_ENABLED: "false"
    GOOGLE_CLIENT_ID: ""
    GOOGLE_OIDC_CALLBACK_URI: ""
    OIDC_GITHUB_ENABLED: "false"
    GITHUB_CLIENT_ID: ""
    GITHUB_OIDC_CALLBACK_URI: ""
    OIDC_TYPE: ""
    OIDC_CLIENT_ID: ""
    OIDC_CALLBACK_URI: ""
    OIDC_URL: ""
    OIDC_SCOPE: ""
  secrets:
    SMTP_PSWD: ""
    GOOGLE_CLIENT_SECRET: ""
    GITHUB_CLIENT_SECRET: ""
    OIDC_CLIENT_SECRET: ""
  service:
    port: 80
  ingress:
    path: /cm-api
    stripPrefix: true

# Studio Frontend
# Note: Frontend builds Vue.js at startup, requires significant memory
studioFrontend:
  enabled: true
  replicas: 2
  image:
    repository: lintoai/studio-frontend
    pullPolicy: IfNotPresent
  resources:
    limits:
      cpu: "2"
      memory: 4Gi
    requests:
      cpu: 10m
      memory: 64Mi
  service:
    port: 80
  ingress:
    path: /
    stripPrefix: false

# Studio WebSocket
studioWebsocket:
  enabled: true
  replicas: 2
  image:
    repository: lintoai/studio-websocket
    pullPolicy: IfNotPresent
  resources:
    limits:
      cpu: "1"
      memory: 1Gi
    requests:
      cpu: 10m
      memory: 64Mi
  env:
    NODE_ENV: production
    CM_JWT_SECRET: ""
  service:
    port: 80
  ingress:
    path: /ws
    stripPrefix: true

# MongoDB
mongodb:
  enabled: true
  image:
    repository: mongo
    tag: "6.0.2"
    pullPolicy: IfNotPresent
  resources:
    limits: {}  # No limits for databases - they manage their own memory
    requests:
      cpu: 10m
      memory: 64Mi
  persistence:
    enabled: true
    size: 10Gi
    storageClass: ""
  service:
    port: 27017
